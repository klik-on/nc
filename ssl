https://help.nextcloud.com/t/howto-running-nextcloud-over-self-signed-https-ssl-tls-in-docker/101973  ==SSL
$ mkdir -p etc/ssl/nextcloud/
$ cp cert.pem ./etc/ssl/nextcloud/
$ cp key.pem ./etc/ssl/nextcloud/

$ docker cp ./etc nc-app-1:/
Successfully copied 7.68kB to nc-app-1:/
$ docker cp setssl.sh nc-app-1:/usr/local/bin/setssl.sh
Successfully copied 3.07kB to nc-app-1:/usr/local/bin/setssl.sh

$ docker exec -it nc-app-1 /bin/bash
root@aa90eed00207:/var/www/html# chmod +x /usr/local/bin/setssl.sh
# setssl.sh admin@ddns.net agsipsdh.ddns.net

$ cat Dockerfile
FROM nextcloud:apache
COPY setssl.sh /usr/local/bin/
RUN /usr/local/bin/setssl.sh admin@ddns.net agsipsdh.ddns.net

### vi /usr/local/bin/setssl.sh
# setssl.sh
# USAGE: setssl.sh <email> <domain>

echo 'SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
SSLProtocol All -SSLv2 -SSLv3
SSLHonorCipherOrder On
Header always set Strict-Transport-Security "max-age=63072000; includeSubdomains"
Header always set X-Frame-Options DENY
Header always set X-Content-Type-Options nosniff
SSLCompression off
SSLSessionTickets Off' > /etc/apache2/conf-available/ssl-params.conf
echo "<IfModule mod_ssl.c>
        <VirtualHost _default_:443>
                ServerAdmin $2
                ServerName $1
" > /etc/apache2/sites-available/default-ssl.conf
echo '
                DocumentRoot /var/www/html

                ErrorLog ${APACHE_LOG_DIR}/error.log
                CustomLog ${APACHE_LOG_DIR}/access.log combined

                SSLEngine on

                SSLCertificateFile    /etc/ssl/nextcloud/cert.pem
                SSLCertificateKeyFile /etc/ssl/nextcloud/key.pem

                <FilesMatch "\.(cgi|shtml|phtml|php)$">
                                SSLOptions +StdEnvVars
                </FilesMatch>
                <Directory /usr/lib/cgi-bin>
                                SSLOptions +StdEnvVars
                </Directory>
        </VirtualHost>
</IfModule>' >> /etc/apache2/sites-available/default-ssl.conf
a2enmod ssl >/dev/null
a2ensite default-ssl >/dev/null
a2enconf ssl-params >/dev/null


#### REDIS
I just looked it up on an Ubuntu test vm I have.
    Install redis: apt install redis php-redis
    Configure redis: /etc/redis/redis.conf
unixsocket /var/run/redis/redis.sock
unixsocketperm 660

    Restart redis: systemctl restart redis
    Add apache to the redis group: usermod -aG redis www-data
    Add redis to your nextcloud configuration.

'memcache.local' => '\\OC\\Memcache\\APCu',
  'filelocking.enabled' => true,
  'memcache.locking' => '\OC\Memcache\Redis',
  'redis' => array(
     'host' => '/var/run/redis/redis.sock',
     'port' => 0,
     'timeout' => 0.0,
      ),

    Done since it doesnâ€™t look like Ubuntu use php-fpm.

